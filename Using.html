

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using SVS &mdash; Lunar Volcano Simulator 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Lunar Volcano Simulator 0.1 documentation" href="index.html" />
    <link rel="prev" title="Installing the Strombolian Volcano Simulator" href="Installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Installation.html" title="Installing the Strombolian Volcano Simulator"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Lunar Volcano Simulator 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="using-svs">
<span id="using"></span><h1>Using SVS<a class="headerlink" href="#using-svs" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<p>This page documents the implementation and usage of SVS.  The model is constantly evolving and the documentation may not cover all pertinent features.  See the doc strings in the code as these are the most up to date indication of functionality.  We are current as of 0.1.</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The basic usage of the script displays the iterative deposition of particles in a matplotlib gui window.  After the deposition has completed it is possible to save the window to a PNG.</p>
<p>Two plots are displayed, the first is a movie that tracks where particles are deposited.  The second, populated at the completion of deposition, is a density map, showing points per grid cell.</p>
<div class="section" id="running-the-iterative-deposition">
<h3>Running the iterative deposition<a class="headerlink" href="#running-the-iterative-deposition" title="Permalink to this headline">¶</a></h3>
<p>To get help, and see available parameters:</p>
<div class="highlight-python"><pre>$ python simulation2.py --help</pre>
</div>
<p>To run a basic model with all default ejection parameters:</p>
<div class="highlight-python"><pre>$ python simulation2.py</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default model emplaces 500 points with ejection velocity between 300 and 325m/s and ejection angle between 30 and 60 degrees.  Azimuth of ejection is random.</p>
</div>
<p>To provide a fixed ejection angle:</p>
<div class="highlight-python"><pre>$ python simulation2.py --angle 45
$ python simulation2.py -a 45</pre>
</div>
<p>To provide your own range of ejection angles:</p>
<div class="highlight-python"><pre>$ python simulation2.py --angle minAngle maxAngle
$ python simulation2.py --angle 25 75</pre>
</div>
<p>To provide your fixed ejection velocity:</p>
<div class="highlight-python"><pre>$ python simulation2.py --velocity 400
$ python simulation2.py -v 400</pre>
</div>
<p>To provide a range of velocities:</p>
<div class="highlight-python"><pre>$ python simulation2.py -v 350 425
$ python simulation2.py --velocity 275 450</pre>
</div>
</div>
<div class="section" id="altering-the-grid-size">
<h3>Altering the grid size<a class="headerlink" href="#altering-the-grid-size" title="Permalink to this headline">¶</a></h3>
<p>By default, the model utilizes a 1000m^2 grid cell to track deposition density.  The color bar indicating deposition scales with the data.  To alter the grid cell size you can define Pixel Per Grid Cell as :math:: x * 100m, where x is some scalar multiplier.  For example, when <img class="math" src="_images/math/dce07f44aade9496a90bf9ffa973f2152fcee4d6.png" alt="x = 10"/>, grid size is <img class="math" src="_images/math/5d5fbf631724062e9a4fb32856d6bba01449774b.png" alt="1000m^2"/>.  When <img class="math" src="_images/math/e7837115e1be9088e025627e0228c52086497d0d.png" alt="x = 50"/>, grid size is <img class="math" src="_images/math/078002d4bee0461492944cd9ea6fabcea4c69e50.png" alt="5000m^2"/>.  This can be altered using:</p>
<div class="highlight-python"><pre>$ python simulation2.py --ppg 50</pre>
</div>
</div>
<div class="section" id="writing-to-a-shapefile">
<h3>Writing to a shapefile<a class="headerlink" href="#writing-to-a-shapefile" title="Permalink to this headline">¶</a></h3>
<p>Users can write the resulting model to a shapefile using the following:</p>
<div class="highlight-python"><pre>$ python simulation2.py --shapefile SOMENAME.shp</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The resulting file is &#8216;timestamped&#8217; with an iteration number.  It is therefore possible, as of ArcGIS 10.0 to utilize the time slider to explore the temporality of deposition.  We suggest setting the time specification to years when using this type of visualization.</p>
</div>
</div>
<div class="section" id="combining-arguments">
<h3>Combining Arguments<a class="headerlink" href="#combining-arguments" title="Permalink to this headline">¶</a></h3>
<p>Combining arguments is completely valid,for example the following would define a custom ejection angle, velocity, and output the results to a shapefile.:</p>
<div class="highlight-python"><pre>$ python simulation2.py -a 35 80 -v 375 425 --shapefile MyTestRun.shp</pre>
</div>
</div>
<div class="section" id="speed">
<h3>Speed<a class="headerlink" href="#speed" title="Permalink to this headline">¶</a></h3>
<p>Iterative deposition in a live matplotlib windows is suitably fast for low number of <em>n</em>.  When <em>n</em> &gt; 10,000 we suggest using the <em>&#8211;fast</em> flag.  This flag bypasses the interactive visualization and writes directly to a shapefile.  In this way, it is no longer possible to visualize the results in matplotlib.  The <em>&#8211;fast</em> implementation is multicore enabled and will utilize all available processing capability on your machine.:</p>
<div class="highlight-python"><pre>$ python simulation2.py --fast MyFastShapefile.shp</pre>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is possible that python will warn you that your output is not a directory.  This is because a shapefile with the same name already exists in the directory.  Either change the name of your output or delete the old output.</p>
</div>
</div>
</div>
<div class="section" id="location">
<h2>Location<a class="headerlink" href="#location" title="Permalink to this headline">¶</a></h2>
<p>Currently this model is focused around the dark ring material eruption (Mare Orientale).  The underlying basemap is hardcoded as is the output shapefile.  With relatively trivial alteration to the code, it will be possible to extend the model.</p>
</div>
<div class="section" id="ejection-model">
<h2>Ejection Model<a class="headerlink" href="#ejection-model" title="Permalink to this headline">¶</a></h2>
<p>We are modeling this ejection using the most basic, atmosphere free, trajectory model.  Briefly, here are the steps we take to calculate the position of the deposited material.</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Randomly determine the ejection angle, <img class="math" src="_images/math/52e8ed7a3ba22130ad3984eb2cd413406475a689.png" alt="\theta"/></p>
</li>
<li><p class="first">Calculate <img class="math" src="_images/math/15d49a9c5bb0a43b320d4edbb32bfee2b5d069de.png" alt="\theta^2"/></p>
</li>
<li><p class="first">Randomly determine velocity from the given range, <img class="math" src="_images/math/a9f23bf124b6b2b2a993eb313c72e678664ac74a.png" alt="v"/></p>
</li>
<li><p class="first">Compute <img class="math" src="_images/math/dd3f1508c9d4c0d26387390fc01db56f894d1500.png" alt="v^2"/></p>
</li>
<li><p class="first">Compute total possible theoretical distance:</p>
<blockquote>
<div><p>distance = <img class="math" src="_images/math/abf1d148a927aa17ac144d2fc929ac9daefb1d8c.png" alt="(v^2 * \theta)/g"/>, where <img class="math" src="_images/math/c85ee0566fac7b51fb746205e4f3e19044f58d6e.png" alt="g = 1.62m/s"/></p>
</div></blockquote>
</li>
<li><p class="first">Randomly determine some ejection azimuth between 0 and 360.</p>
</li>
</ol>
</div></blockquote>
<p>Next we calculate the idealized height of the projectile over the body at 100m intervals.  This interval was selected as it is the nominal resolution of the WAC DTM.  We therefore know: total theoretical travel distance,  azimuth, height above a planar surface at 100m interval.  Using this information we then convert from geographic coordinates to pixel space and:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Extract the underlying topography along the line of travel.  This is stored as an nx1 array of elevation data.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We are using a nearest neighbor interpolation.  It is possible that the line of travel &#8216;clips&#8217; the corner of a pixel.  We are utilizing the spot elevation at that pixel in our calculation.  This <em>should</em> be relatively safe due to Tobler&#8217;s first law and the resolution of our data.</p>
</div>
</li>
<li><p class="first">Normalize the trajectory elevation to the elevation of the ejection point.  To do this we are subtracting the elevation at ejection from each index of the trajectory vector.</p>
</li>
<li><p class="first">Add the absolute value of the elevation vector to the the elevation vector.  Here the goal is to have all values <img class="math" src="_images/math/f96f5a6db00c4880a684c5d89a290314a32fa045.png" alt="&gt;="/> 0.  This allows for the vectorized computation of elements and is done to speed program computation.</p>
</li>
<li><p class="first">Subtract the elevation vector from the trajectory vector to calculate the distance above our modified topography.</p>
</li>
<li><p class="first">Add the negative offset to the elevation back to the newly generated &#8216;distance above the topographic surface&#8217; raster.</p>
</li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This will need to be modified to test for sign should the ejection point be higher than 0m.</p>
</div>
</div></blockquote>
<ol class="arabic simple" start="6">
<li>Return the index of impact point <img class="math" src="_images/math/8b8182082c03da952f23b2cccac0a0236c877801.png" alt="* 100"/>.  This is the total distance in meters that the projectile travelled in pixel space and an estimation (within 99m) of total travel distance.</li>
</ol>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Using SVS</a><ul>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#running-the-iterative-deposition">Running the iterative deposition</a></li>
<li><a class="reference internal" href="#altering-the-grid-size">Altering the grid size</a></li>
<li><a class="reference internal" href="#writing-to-a-shapefile">Writing to a shapefile</a></li>
<li><a class="reference internal" href="#combining-arguments">Combining Arguments</a></li>
<li><a class="reference internal" href="#speed">Speed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#location">Location</a></li>
<li><a class="reference internal" href="#ejection-model">Ejection Model</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Installation.html"
                        title="previous chapter">Installing the Strombolian Volcano Simulator</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/Using.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Installation.html" title="Installing the Strombolian Volcano Simulator"
             >previous</a> |</li>
        <li><a href="index.html">Lunar Volcano Simulator 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Jay Laura.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>